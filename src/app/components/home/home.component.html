<div class="home-container">
  <!-- Header Section -->
  <div class="header-section">
    <h1>Welkom bij Bitzomax</h1>
    <p class="subtitle">Ontdek de beste Nederlandse video content</p>
    
    <!-- Category Filter -->
    <div class="category-filter">
      <mat-chip-listbox aria-label="Video categorieÃ«n">
        <mat-chip-option 
          *ngFor="let category of categories"
          [value]="category.value"
          [selected]="selectedCategory === category.value"
          (click)="onCategoryChange(category.value)">
          {{ category.label }}
        </mat-chip-option>
      </mat-chip-listbox>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Video's laden...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-container">
    <mat-icon>error</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadVideos()">
      Opnieuw proberen
    </button>
  </div>
  <!-- Videos Grid -->
  <div *ngIf="!loading && !error" class="videos-section">
    <div class="videos-grid">
      <div *ngFor="let video of videos" class="video-card" (click)="playVideo(video)">
        <!-- Video Thumbnail with 9:16 Aspect Ratio -->
        <div class="video-thumbnail">
          <!-- Video Player (Hidden by default) -->
          <video 
            #videoPlayer
            *ngIf="playingVideoId === video.id && canWatchVideo(video)"
            [src]="getVideoUrl(video.videoUrl)" 
            class="video-player"
            controls
            autoplay
            (click)="$event.stopPropagation()"
            (ended)="stopVideo()">
          </video>
          
          <!-- Cover Image -->
          <img 
            *ngIf="playingVideoId !== video.id"
            [src]="getVideoThumbnail(video)" 
            [alt]="video.title"
            class="cover-image"
            (error)="onImageError($event)">
          
          <!-- Play Button Overlay -->
          <div *ngIf="playingVideoId !== video.id" class="play-overlay">
            <div class="play-button">
              <mat-icon>{{ canWatchVideo(video) ? 'play_arrow' : 'lock' }}</mat-icon>
            </div>
          </div>
          
          <!-- Premium Badge -->
          <div *ngIf="video.contentType === 'PREMIUM'" class="premium-badge">
            <mat-icon>star</mat-icon>
            <span>Premium</span>
          </div>
          
          <!-- Duration Badge -->
          <div *ngIf="video.duration" class="duration-badge">
            {{ formatDuration(video.duration) }}
          </div>
        </div>

        <!-- Video Info -->
        <div class="video-info">
          <h3 class="video-title">{{ video.title }}</h3>
          <p class="video-description" *ngIf="video.description">{{ video.description }}</p>
          
          <div class="video-meta">
            <span class="views">
              <mat-icon>visibility</mat-icon>
              {{ video.viewCount || 0 }} weergaven
            </span>
            <span class="likes">
              <mat-icon>favorite</mat-icon>
              {{ video.likeCount || 0 }}
            </span>
            <span class="content-type" [class.premium]="video.contentType === 'PREMIUM'">
              {{ video.contentType === 'PREMIUM' ? 'Premium' : 'Gratis' }}
            </span>
          </div>

          <!-- Hashtags -->
          <div class="hashtags" *ngIf="video.hashtags">
            <span class="hashtag" *ngFor="let tag of video.hashtags.split(',').slice(0, 3)">
              #{{ tag.trim() }}
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && !error && videos.length === 0" class="empty-state">
    <mat-icon class="empty-icon">video_library</mat-icon>
    <h2>Geen video's gevonden</h2>
    <p>Er zijn momenteel geen video's beschikbaar in deze categorie.</p>
  </div>
</div>
